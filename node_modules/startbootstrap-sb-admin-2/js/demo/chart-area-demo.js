const webSocket = new WebSocket('ws://localhost:8888')
  console.log(webSocket)
  webSocket.addEventListener('open', () => {
    const message = {
      type: 'load'
    }
    webSocket.send(JSON.stringify(message))
    console.log('connected')
    })
    webSocket.onmessage = event => {
      const data = JSON.parse(event.data)
      console.log(data)
      updateLineChart(data)
      // updateBarChart(data)
    }
    const chartData = {
            labels: [],
            datasets: [
                {
                    label: 'Sales',
                    data: [],
                    backgroundColor: '',
                    borderColor: '',
                    borderWidth: 4
                }
            ]
        }

        const lineConfig = {
            type: 'line',
            data: chartData
        }

        const lineCtx = document.getElementById('myAreaChart')
        const lineChart = new Chart(lineCtx, lineConfig)

        const updateLineChart = (data) => {
            let salesArray = []
            let dateArray = []
            data.map( row => {
                salesArray.push(row.title)
                dateArray.push(row.title)
            })
            chartData.labels = dateArray
            chartData.datasets[0].data = salesArray
            chartData.datasets[0].backgroundColor = 'lightcoral'
            chartData.datasets[0].borderColor = 'lightcoral'
            lineChart.update()
        }

    